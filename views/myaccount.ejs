<%- include('partials/header') %>
<h3 class="mt-5"> My Account </h3>

<div class="container iForm mt-4" id="view">
  <ul class="list-group my-3">
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <h6>Username:</h6>
      <span class=""><%=user.username%></span>
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <h6>Email:</h6>
      <span class=""><%=user.email%></span>
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <h6>Status:</h6>
      <span class=""><%=user.status%></span>
    </li>
  </ul>
  <button type="button" class="btn btn-secondary" onclick="edit()">Edit</button>
</div>

<div class="container iForm" id="edit" style="display: none">
  <form method="POST" action="/myAccount">
    <label for="username" class="mt-3">Username</label>
    <input type="text" name="username" id="username" value="<%=user.username%>" class="form-control" required>
    <label for="email" class="mt-2">Login email</label>
    <input type="email" name="email" value="<%=user.email%>" class="form-control" required>

    <div class="form-group mt-2">
      <label for="status">Status</label>
      <select name="status" id="status" class="form-control">
        <option value="Active">Active</option>
        <option value="Inactive">Inactive</option>
      </select>
    </div>

    <button class="btn btn-primary btn-block mt-4" type="submit">Save</button>
  </form>

</div>

<script>
  function edit() {
    document.getElementById('view').style.display = 'none';
    document.getElementById('edit').style.display = 'block';
  }

  $(document).ready(function () {
    const status = document.getElementById('status').options;
    for (i = 0; i < status.length; i++) {
      if (status[i].value === "<%=user.status%>") {
        status[i].selected = true;
      }
    }
  });

</script>

<%- include('partials/footer') %>